(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{687:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),a=n(48),r=n(21),l=n.n(r),i=n(4),u=n(94),s=n.n(u),d=(n(141),n(143),Object(o.lazy)((function(){return Promise.all([n.e(2),n.e(4),n.e(5),n.e(6)]).then(n.bind(null,342))}))),f=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,343))}));t.default=function(){var e=Object(a.c)((function(e){return e})),t=e.post,n=e.searchtag,r=Object(a.b)(),u=!1,h=[],p=void 0;console.log("searchtag post",t,n);var g=function(){window.scrollY>document.documentElement.scrollHeight-document.documentElement.clientHeight-500&&!u&&h[0]&&h.map((function(e){return e.id===p}))&&(u=!0,console.log("getNewpost",h,h.length-1,h[h.length-1]),l()({method:"get",url:"/post/searchtag",params:{id:h[0]?h[h.length-1].id:void 0,content:n}}).then((function(e){h=e.data.map((function(e){return e})),p=void 0===p?h[0].id:p,r({type:i.g,payload:{post:h}})})).then((function(){u=!1})).catch((function(e){console.error("üò° ",e)})))};return Object(o.useEffect)((function(){return window.addEventListener("scroll",g),function(){window.removeEventListener("scroll",g)}}),[]),Object(o.useEffect)((function(){console.log("useEffect check",t,h),h[0]!==t[0]&&(r({type:i.m}),h=[]),l()({method:"get",url:"/post/searchtag",params:{id:h[0]?h[h.length-1].id:void 0,content:n}}).then((function(e){console.log("searchtagData",e),h=e.data.map((function(e){return e})),r({type:i.i,payload:{post:h}})})).then((function(){0===h.length&&s.a.warning("There are no posts üê≥")})).catch((function(e){console.error("üò° ",e)}))}),[n,n!==t.searchtag]),c.a.createElement("div",null,c.a.createElement(f,null),t.map((function(e){return c.a.createElement(d,{key:e.created_at,post:{data:e}})})))}}}]);